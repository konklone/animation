<!DOCTYPE html> 
<html lang="en"> 
<head> 
  <meta charset="utf-8"> 
  <title>Playground</title> 
  <script type="text/javascript" src="raphael-1.5.2.min.js"></script>
  <script type="text/javascript" src="jquery-1.6.1.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      text-align: center;
      background-color: #fff;
    }
    
    #canvas {
      height: 480px;
      margin: 20px auto;
      text-align: left;
      width: 640px;
    }
  </style>
  
  <script type="text/javascript">
    // equilateral triangle
    // x: center of triangle
    // y: center of triangle
    // d: length of one side
    // o: options
    //    inverted: flip triangle upside down
    //    fill: fill color
    //    stroke: stroke color
    //    opacity: fill opacity
    Raphael.fn.triangle = function (x, y, s, d) {
      var r = s/2;
      var path = 
        "m-"+r+",-"+r +
        "l"+s+",0 -"+r+","+s +
        "z";
        
      return this
        .path(["M", x, y] + path)
        .rotate(d)
        
        // defaults
        .attr({ 
          fill: "#fff",
          stroke: "none"
        });
    };
      
    var triangles = [];
    
    $(function() {
      var size = 30;
      var rows = 16;
      var cols = 40;
      var height = (rows * size) - (size/2);
      var width = (cols * (size/2)) - (size/2);
    
      var c = Raphael("canvas", width, height);
      c.clear();
      c.rect(0, 0, width, height).attr({
        fill: "#333",
        stroke: "none",
        "clip-rect": "0,0,"+width+","+height
      });
      
        
      $("#run").click(function() {
        
        
        for (var j=0; j<16; j++) {
          
          triangles[j] = [];
          
          for (var i=0; i<40; i++) {
            var x = (i * (size/2));
            var y = (j * size);
            
            var hue = Math.random();
            
            triangles[j][i] = c.triangle(x, y, size, ((i+j) % 2 == 1) ? 0 : 180)
              .attr({
                fill: "hsb(" + hue + ", 0.7, 1)",
                //fill: "#369",
                "fill-opacity": 1
              });
          } // end row
        } // end column
      });
      
      $("#run").click();
    });
  </script>
</head>

<body>
  <div id="canvas"></div>
  <div>
    <button id="run" type="button">Run</button>
  </div>
</body>

</html>